# Проверка аудиокниг через Яндекс SpeechKit

**Версия:** 10.7.0 | **Дата:** 2026-01-29

> Полная документация: `Документация/Архив/PROJECT_FULL.md`

## Текущие показатели

| Глава | Golden | FP |
|-------|--------|-----|
| 1 | 31/31 | 79 |
| 2 | 21/21 | 49 |
| 3 | 20/20 | 83 |
| 4 | 21/21 | 51 |
| **Итого** | **93/93** | **262** |

- **FP Recall:** 72.3%
- **Unit-тесты:** 370+ (0 failures)

## Архитектура v10.7

```
Аудио → Яндекс SpeechKit → Транскрипция
                                ↓
Оригинал → Нормализация → Умное сравнение → Фильтрация → Ошибки
                                ↓
                         JSON / DOCX / Веб
```

### Ключевые модули

| Модуль | Версия | Назначение |
|--------|--------|------------|
| smart_compare.py | v10.5 | Посегментное выравнивание |
| engine.py | v8.6 | Фильтрация (20+ уровней) |
| AlignmentManager | v1.2 | Макро-якоря + монотонность |
| MorphoRules | v1.1 | Морфологические правила |
| ScoringEngine | v1.2 | Адаптивные штрафы |

## Быстрый старт

```bash
# Полный пайплайн
python Инструменты/pipeline.py глава.mp3 оригинал.docx

# С веб-интерфейсом
python Инструменты/pipeline.py глава.mp3 оригинал.docx --web

# Тесты
python Тесты/run_full_test.py           # все главы
python Тесты/run_full_test.py --clean   # чистое тестирование
pytest -v                                # unit-тесты
```

## Структура проекта

```
Яндекс Спич/
├── Инструменты/
│   ├── pipeline.py          # Полный пайплайн
│   ├── smart_compare.py     # Умное сравнение
│   ├── filters/
│   │   ├── engine.py        # Движок фильтрации
│   │   ├── morpho_rules.py  # Морфология
│   │   └── ...
│   ├── false_positives_db.py
│   └── ...
├── Тесты/
│   ├── run_full_test.py     # Полный тест
│   ├── золотой_стандарт_глава*.json
│   └── ...
├── Словари/
│   ├── Словарь_имён_персонажей.txt
│   └── false_positives.db
├── Результаты проверки/
├── PROJECT.md
├── ROADMAP.md
└── CHANGELOG.md
```

## Принципы фильтрации

1. **Консервативность** — при сомнении НЕ фильтруем
2. **Golden = 100%** — ни одна реальная ошибка не должна быть отфильтрована
3. **Грамматика ≠ фильтрация** — разные леммы/падежи/числа = реальные ошибки
4. **Без хардкодов** — правила работают на любых данных

## Типы ошибок

- **substitution** — замена слова (ЖИВЁМ → живы)
- **insertion** — лишнее слово
- **deletion** — пропуск слова
- **transposition** — перестановка (ТЫ ЧТО → что ты)

## Зависимости

```bash
pip install pymorphy2 thefuzz python-docx num2words
```

---

*Версия: 10.7.0 (2026-01-29)*
