"""
Константы и словари для фильтрации ошибок транскрипции.

Содержит:
- HOMOPHONES — пары омофонов
- GRAMMAR_ENDINGS — грамматические окончания
- WEAK_WORDS — слабые слова (союзы, частицы, предлоги)
- INTERJECTIONS — междометия
- YANDEX_TYPICAL_ERRORS — типичные ошибки Яндекса
- YANDEX_NAME_ERRORS — ошибки Яндекса в именах
- И другие словари
"""

import re
from typing import Set, Tuple, List, Dict


# =============================================================================
# ЗАЩИЩЁННЫЕ СЛОВА
# =============================================================================

PROTECTED_WORDS: Set[str] = {
    'орден', 'магистр', 'комтур', 'рыцарь',
    'один', 'два', 'три', 'четыре', 'пять',
    'первый', 'второй', 'третий',
    'сто', 'тысяча', 'миллион',
}


# =============================================================================
# СЛАБЫЕ СЛОВА
# =============================================================================

WEAK_WORDS: Set[str] = {
    # Союзы
    'и', 'а', 'но', 'да', 'или', 'либо', 'то', 'ни',
    'что', 'чтобы', 'если', 'когда', 'пока', 'хотя', 'хоть',
    'как', 'будто', 'словно', 'точно', 'ибо', 'ведь',
    # Частицы
    'не', 'ни', 'бы', 'же', 'ли', 'ль', 'ка', 'то',
    'вот', 'вон', 'ну', 'уж', 'даже', 'лишь', 'только',
    'ещё', 'еще', 'уже', 'почти', 'именно', 'просто',
    # Предлоги
    'в', 'во', 'на', 'за', 'из', 'от', 'до', 'по', 'под', 'над', 'о', 'об',
    'к', 'ко', 'у', 'с', 'со', 'при', 'про', 'без', 'для', 'через',
    # Местоимения
    'я', 'ты', 'он', 'она', 'оно', 'мы', 'вы', 'они',
    'мой', 'твой', 'его', 'её', 'наш', 'ваш', 'их', 'свой',
    'меня', 'тебя', 'нас', 'вас', 'себя',
    'мне', 'тебе', 'нам', 'вам', 'себе',
    'мной', 'тобой', 'нами', 'вами', 'собой',
    'этот', 'тот', 'такой', 'какой', 'который',
    'все', 'всё', 'весь', 'вся', 'всю',
    # Глаголы-связки
    'быть', 'был', 'была', 'было', 'были', 'есть', 'будет',
    'стать', 'стал', 'стала', 'стало', 'стали',
    # Наречия
    'так', 'там', 'тут', 'здесь', 'где', 'куда', 'откуда',
    'тогда', 'теперь', 'потом', 'сейчас', 'сначала',
    'очень', 'совсем', 'слишком', 'немного', 'чуть',
}


# =============================================================================
# МЕЖДОМЕТИЯ
# =============================================================================

INTERJECTIONS: Set[str] = {
    # Односимвольные (НЕ союзы/предлоги)
    'п', 'ф', 'м', 'э',
    # Двух+ символьные
    'ах', 'ох', 'эх', 'ух', 'ой', 'ай',
    'хм', 'гм', 'тс', 'пф', 'тьфу',
    'эй', 'эге', 'ага', 'угу',
}


# =============================================================================
# ОМОФОНЫ
# =============================================================================

HOMOPHONES: Set[Tuple[str, str]] = {
    ('о', 'а'), ('е', 'и'), ('е', 'э'), ('я', 'е'),
    ('д', 'т'), ('б', 'п'), ('г', 'к'), ('в', 'ф'), ('з', 'с'), ('ж', 'ш'),
    ('его', 'ево'), ('что', 'чё'), ('что', 'што'), ('чего', 'чево'),
    ('конечно', 'канешна'), ('сегодня', 'сёдня'), ('сейчас', 'щас'),
    ('только', 'тока'), ('говорит', 'грит'), ('тысяч', 'тыщ'),
    ('ого', 'ово'), ('ться', 'тся'), ('ться', 'ца'),
    ('нн', 'н'), ('сс', 'с'), ('лл', 'л'), ('мм', 'м'),
    ('ну', 'но'), ('но', 'ну'),
    # ('я', 'и'), ('и', 'я'),  # УБРАНО: разные слова с разным значением!
    ('а', 'но'), ('но', 'а'),
    ('то', 'ты'), ('ты', 'то'),
    ('бледнея', 'бледнее'), ('бледнее', 'бледнея'),
    ('краснея', 'краснее'), ('краснее', 'краснея'),
    ('белея', 'белее'), ('белее', 'белея'),
    ('чернея', 'чернее'), ('чернее', 'чернея'),
    ('темнея', 'темнее'), ('темнее', 'темнея'),
    ('светлея', 'светлее'), ('светлее', 'светлея'),
    ('ах', 'ох'), ('ох', 'ах'),
    ('он', 'она'), ('она', 'он'),  # v5.1.1: ложное срабатывание гл.1 98с
    ('э', 'и'), ('и', 'э'),
    ('хм', 'кх'), ('кх', 'хм'),
    ('думая', 'думаю'), ('думаю', 'думая'),
    ('скрывая', 'скрываю'), ('скрываю', 'скрывая'),
    ('добавляя', 'добавляю'), ('добавляю', 'добавляя'),
    ('делая', 'делаю'), ('делаю', 'делая'),
    ('портя', 'портят'), ('портят', 'портя'),
    ('пьянка', 'пианка'), ('пианка', 'пьянка'),
    ('это', 'эта'), ('эта', 'это'),
    ('его', 'и'), ('и', 'его'),
    ('мои', 'и'), ('и', 'мои'),
    ('п', 'ха'), ('ха', 'п'),
    ('ф', 'ха'), ('ха', 'ф'),
    ('пф', 'ха'), ('ха', 'пф'),
}

HOMOPHONE_PATTERNS_COMPILED = [
    (re.compile(r'(\w+)ого$'), r'\1ово'),
    (re.compile(r'(\w+)его$'), r'\1ево'),
    (re.compile(r'(\w+)ться$'), r'\1тся'),
    (re.compile(r'(\w+)ться$'), r'\1ца'),
    (re.compile(r'(\w+)тся$'), r'\1ца'),
    (re.compile(r'^о(\w+)'), r'а\1'),
    (re.compile(r'е([^е])'), r'и\1'),
]


# =============================================================================
# ГРАММАТИЧЕСКИЕ ОКОНЧАНИЯ
# =============================================================================

GRAMMAR_ENDINGS: Set[Tuple[str, str]] = {
    # Прилагательные: род/число
    ('ый', 'ое'), ('ый', 'ая'), ('ый', 'ые'),
    ('ий', 'ее'), ('ий', 'яя'), ('ий', 'ие'),
    ('ое', 'ая'), ('ое', 'ые'), ('ая', 'ые'),
    ('ее', 'яя'), ('ее', 'ие'), ('яя', 'ие'),
    # v5.3: Прилагательные/местоимения: прочие→прочее, настоящие→настоящей
    ('ие', 'ее'), ('ее', 'ие'),
    ('ие', 'ей'), ('ей', 'ие'),
    # v5.3: Прилагательные: задавший↔задавшие, кратчайший↔кратчайше
    ('ий', 'ие'), ('ие', 'ий'),
    ('ий', 'е'), ('е', 'ий'),
    # Краткие/полные прилагательные
    ('ны', 'ный'), ('ен', 'енный'), ('ены', 'енный'),
    # v5.3: Краткие: открыта↔открыто (средний/женский род)
    ('а', 'о'), ('о', 'а'),
    # Глаголы: число (3 лицо)
    ('ет', 'ут'), ('ет', 'ют'), ('ит', 'ят'), ('ит', 'ат'),
    # v5.3: Глаголы/деепричастия: прокручиваю↔прокручивая, напоминаю↔напоминая
    ('ю', 'я'), ('я', 'ю'),
    # Причастия/деепричастия
    ('ая', 'ав'), ('яя', 'яв'),
    # v5.3: Существительные — фонетически близкие падежные формы
    ('а', 'ы'), ('ы', 'а'),  # рама↔рамы, извивы↔извива
    ('у', 'ы'), ('ы', 'у'),  # зону↔зоны, силу↔силы
    ('и', 'й'), ('й', 'и'),  # формации↔формаций, стихии↔стихий
    ('е', 'я'), ('я', 'е'),  # зелье↔зелья, управление↔управления
    ('е', 'и'), ('и', 'е'),  # утаивание↔утаивании
    ('и', 'я'), ('я', 'и'),  # ожидания↔ожидании
    ('ой', 'ы'), ('ы', 'ой'),  # силой↔силы, основой↔основы
    ('ей', 'и'), ('и', 'ей'),  # линией↔линии
    ('ов', 'а'), ('а', 'ов'),  # пальцев↔пальца
    ('ев', 'а'), ('а', 'ев'),
    # v5.3: Глаголы: заявили↔заявились
    ('и', 'ись'), ('ись', 'и'),
    # v5.3: Существительные: множественное число
    ('ы', ''), ('', 'ы'),  # расщелин↔расщелины
    ('и', ''), ('', 'и'),
    # v5.7: Из анализа топ-30 ложных срабатываний
    ('ими', 'им'), ('им', 'ими'),  # этими↔этим
    ('ем', 'ы'), ('ы', 'ем'),  # живём↔живы (глаголы и краткие прилаг.)
    ('ая', 'ал'), ('ал', 'ая'),  # продолжая↔продолжал (деепричастие↔глагол)
    ('о', 'е'), ('е', 'о'),  # громко↔громче (степени сравнения наречий)
    ('ой', 'ые'), ('ые', 'ой'),  # сложной↔сложные
    ('ы', 'ей'), ('ей', 'ы'),  # предводителей↔предводителя
    ('т', 'ты'), ('ты', 'т'),  # талант↔таланты
}


# =============================================================================
# ТИПИЧНЫЕ ОШИБКИ ЯНДЕКСА В ИМЕНАХ
# =============================================================================

YANDEX_NAME_ERRORS: Set[Tuple[str, str]] = {
    ('дорогалым', 'дарагалом'), ('дорогалом', 'дарагалом'),
    ('дорогала', 'дарагала'), ('дорогал', 'дарагал'),
    ('драгал', 'дарагал'), ('лжедорогала', 'лжедарагала'),
    ('морж', 'морщ'), ('морж', 'морщинистый'), ('морщ', 'морщинистый'),
    ('шоу', 'шаугат'), ('шугат', 'шаугат'), ('шаугад', 'шаугат'),
    ('голлума', 'галум'), ('голлум', 'галум'),
    ('зум', 'эрзум'), ('арзум', 'эрзум'), ('арзумы', 'эрзум'), ('арзом', 'эрзум'),
    ('эрзумы', 'эрзум'), ('корзумы', 'эрзум'), ('корзум', 'эрзум'),
    ('ранви', 'аранви'), ('арабви', 'аранви'), ('саранге', 'аранви'),
    ('во', 'вартол'), ('рту', 'вартол'),
    ('годи', 'годий'), ('озма', 'озман'),
    ('эррал', 'ирал'), ('элдор', 'илдур'), ('длиннорукий', 'зеленорукий'),
    ('коллег', 'калек'), ('лавденцы', 'орденцы'), ('коном', 'кланом'),
    ('куровал', 'урвал'),
}

SPLIT_NAME_PATTERNS: List[Tuple[str, str]] = [
    ('шоу', 'гад'),
    ('во', 'рту'),
]

YANDEX_GARBLED_NAMES: Set[str] = {
    'дорогал', 'дорогала', 'дорогалом', 'дорогалым',
    'лжедорогала', 'лжедорогал',
    'лжеморщинистым',
    'драгал', 'драгала',
    'шугат', 'шаугад',
    'голлум', 'голлума',
    'арзум', 'арзумы', 'арзом',
    'эрзумы', 'корзумы', 'корзум',
    'седокило',
    'зритель',
}

CHARACTER_NAMES: Set[str] = {
    'седой', 'красноволосый', 'зеленорукий', 'пересмешник', 'морщинистый',
    'дарагал', 'лжедарагал', 'лжедарагала', 'шаугат', 'галум', 'эрзум',
    'вартол', 'аранви', 'годий', 'озман', 'ирал', 'илдур', 'ян',
    'кунг',
}

COMPOUND_PREFIXES: Set[str] = {
    'не', 'лже', 'само', 'полу',
}

YANDEX_MERGED_WORDS: Dict[str, Tuple[str, str]] = {
    'распятый': ('раз', 'пятый'),
    'отброшенного': ('от', 'брошенного'),
}

SPLIT_COMPOUND_PATTERNS: List[Tuple[str, str]] = [
    ('из', 'за'), ('по', 'хорошему'), ('по', 'настоящему'),
    ('по', 'моему'), ('по', 'твоему'), ('по', 'своему'),
    ('по', 'другому'), ('по', 'разному'), ('по', 'прежнему'),
    ('по', 'видимому'),
    ('что', 'то'), ('как', 'то'), ('кто', 'то'), ('где', 'то'),
    ('когда', 'то'), ('какой', 'то'), ('какая', 'то'), ('какое', 'то'),
    ('какие', 'то'), ('чей', 'то'), ('куда', 'то'), ('откуда', 'то'),
    ('почему', 'то'), ('зачем', 'то'),
    ('что', 'либо'), ('кто', 'либо'), ('как', 'либо'),
    ('где', 'либо'), ('когда', 'либо'),
    ('от', 'того'), ('из', 'под'), ('когда', 'то'),
    ('какой', 'либо'),
    ('что', 'нибудь'), ('кто', 'нибудь'), ('как', 'нибудь'),
    ('где', 'нибудь'), ('когда', 'нибудь'), ('какой', 'нибудь'),
]


# =============================================================================
# ТИПИЧНЫЕ ОШИБКИ ЯНДЕКСА
# =============================================================================

YANDEX_TYPICAL_ERRORS: Set[Tuple[str, str]] = {
    ('изза', 'из-за'), ('чтото', 'что-то'), ('както', 'как-то'), ('гдето', 'где-то'),
    ('ввиду', 'уведу'), ('информации', 'формации'), ('информацией', 'формацией'),
    ('ледянея', 'леденея'),
    ('расплывчатая', 'расплывчивая'),
    ('цикл', 'ни'),
    ('установим', 'восстановим'),
    ('недоранга', 'ни'),
    ('блядочное', 'ублюдочные'),
    ('блядочное', 'правила'),
    ('снимаю', 'снимаем'),
    ('вручая', 'вручаю'),
    ('сто', 'то'),
    ('лет', 'ли'),
    ('формации', 'формацией'),
    ('фракций', 'фракции'),
    ('это', 'этот'),
    ('задержится', 'задержатся'),
    ('повернувшись', 'повернулся'),
    ('везли', 'если'),
    ('наука', 'но'),
    ('вот', 'то'),
    ('вот', 'жетон'),
    ('нет', 'ни'),
    ('из', 'с'),
    ('у', 'тебе'),
    ('от', 'над'),
    ('на', 'а'),
    ('казни', 'казним'),
    ('уверены', 'уверенный'),
    ('наука', 'указ'),
    ('с', 'указ'),
    ('о', 'ублюдочные'),
    ('правило', 'правила'),
    ('трата', 'траты'),
    ('сплошная', 'сплошные'),
    ('пагде', 'пагоде'),
    ('держится', 'задержатся'),
    ('нет', 'мне'),
    ('метит', 'заметят'),
    ('дохов', 'вдохов'),
    ('набился', 'понадобился'),
    ('мертвый', 'мертвы'),
    ('меняются', 'меняется'),
    ('нравится', 'нравятся'),
    ('чтобы', 'что'),
    ('выпускать', 'упускать'),
    ('недостает', 'достает'),
    ('настолько', 'столько'),
    ('отдергал', 'дергал'),
    ('попытались', 'пытались'),
    ('уверен', 'верен'),
    ('помолчал', 'молчал'),
    ('цветок', 'свиток'),
    ('дешевый', 'недешевый'),
    ('блюдочное', 'ублюдочные'),
    ('кот', 'тот'),
    ('голова', 'глава'),
    ('мысли', 'мыслеречи'),
    ('дел', 'дела'),
    ('середь', 'сереть'),
    ('пропущены', 'пропущенной'),
    ('веости', 'виостия'),
    ('вдоха', 'вдохов'),
    ('страны', 'стороны'),
    ('которые', 'вы'),
    ('туда', 'то'),
    ('они', 'а'),
    ('информацией', 'формации'),
    ('из', 'и'),
    ('в', 'то'),
    ('да', 'то'),
    ('контуров', 'комтуров'),
    ('контура', 'комтура'),
    ('контур', 'комтур'),
    ('контуры', 'комтуры'),
    ('коллег', 'калек'),
    ('коллега', 'калека'),
    ('садитесь', 'сойдитесь'),
    ('предводителю', 'предводителей'),
    ('делай', 'делая'),
    ('это', 'выторговали'),
    ('да', 'но'),
    ('хм', 'кх'),
    ('займитесь', 'займи'),
    ('жетон', 'вот'),
    ('ранга', 'недоранга'),
    ('из', 'изза'),
    ('сходу', 'ходу'),
    ('слух', 'вслух'),
    ('влезли', 'если'),
    ('орды', 'орд'),
    ('повелителя', 'повелителей'),
    ('запрета', 'запретов'),
    ('самый', 'самой'),
    ('начало', 'начал'),
    ('тои', 'той'),
    ('напомнился', 'напомнил'),
    ('заглучив', 'заключив'),
    ('слабее', 'слабей'),
    ('обоснованно', 'обосновано'),
    ('отброшенного', 'брошенного'),
    ('метров', 'ветров'),
    ('лор', 'вилор'),
    ('уводил', 'выводил'),
    ('местом', 'местным'),
    ('накопленные', 'купленные'),
    ('распятый', 'раз'),
    ('забудется', 'заблудятся'),
    ('доплату', 'плату'),
    ('ордена', 'орденцы'),
    ('стареешь', 'старейшина'),
    ('у', 'мне'),
    ('что', 'это'),
    ('так', 'да'),
    ('о', 'занять'),
    ('занятиях', 'их'),
    ('до', 'дай'),
    ('они', 'не'),
    ('том', 'потом'),
    ('она', 'наслышан'),
    ('слышен', 'от'),
    ('из', 'изпод'),
    ('ха', 'п'),
    ('ха', 'ф'),
    # v5.1.1: префиксные варианты
    ('умею', 'сумею'), ('сумею', 'умею'),
    # v5.1.1: Яндекс разбивает «оттого» на «от того»
    ('оттого', 'от'), ('от', 'оттого'),
    # v5.3: Фонетические ошибки из главы 3
    ('при', 'и'), ('и', 'при'),
    ('послин', 'после'), ('после', 'послин'),
    ('разговорились', 'сговорились'), ('сговорились', 'разговорились'),
    ('иди', 'веди'), ('веди', 'иди'),
    ('лишение', 'решение'), ('решение', 'лишение'),
    ('ортинцев', 'орденцев'), ('орденцев', 'ортинцев'),
    ('сгребая', 'загребая'), ('загребая', 'сгребая'),
    ('поздравляли', 'вздрагивали'), ('вздрагивали', 'поздравляли'),
    ('ткнуть', 'пнуть'), ('пнуть', 'ткнуть'),
    ('дарвущемся', 'рвущимся'), ('рвущимся', 'дарвущемся'),
    ('отмело', 'отменяло'), ('отменяло', 'отмело'),
    ('милордцев', 'вилорцев'), ('вилорцев', 'милордцев'),
    ('горема', 'големов'), ('големов', 'горема'),
    ('зарда', 'изарда'), ('изарда', 'зарда'),
    # v5.3: ПРЕФИКС-подобные ошибки
    ('скунд', 'с'), ('с', 'скунд'),  # с Кунг → скунд
    ('калов', 'шакалов'), ('шакалов', 'калов'),  # шакалов → калов
    ('даль', 'вдаль'), ('вдаль', 'даль'),
    ('глубь', 'вглубь'), ('вглубь', 'глубь'),
    ('деформации', 'формации'), ('формации', 'деформации'),
    ('навстречу', 'на'), ('на', 'навстречу'),
    # v5.3: Имена персонажей
    ('маорса', 'маорс'), ('маорс', 'маорса'),
    # v5.6: Частые падежные ошибки Яндекса (конкретные пары)
    ('печати', 'печатей'), ('печатей', 'печати'),
    ('записи', 'записей'), ('записей', 'записи'),
    ('господина', 'господин'), ('господин', 'господина'),
    ('порядками', 'порядком'), ('порядком', 'порядками'),
    ('результата', 'результаты'), ('результаты', 'результата'),
    ('орденцем', 'орденцам'), ('орденцам', 'орденцем'),
    ('молодая', 'молодой'), ('молодой', 'молодая'),
    # v5.7: Из топ-30 ложных срабатываний SQLite базы
    # УБРАНЫ: ('вас', 'нас') — golden standard, реальная ошибка
    # УБРАНЫ: ('что', 'кто') — golden standard, реальная ошибка
    # УБРАНЫ: ('выхода', 'способа') — golden standard, реальная ошибка
    # v6.0.1: УБРАНЫ — это реальные ошибки чтеца, а не ошибки Яндекса:
    # УБРАНЫ: ('ощущал', 'ощутил') — разные глаголы (ощущать/ощутить)
    # УБРАНЫ: ('договаривались', 'договорились') — разные глаголы
    # УБРАНЫ: ('нибудь', 'то') — замена частицы (-нибудь → -то)
    # УБРАНЫ: ('мыслеречью', 'мыслью') — авторское слово vs обычное
    # v5.7.2: Ложные срабатывания главы 4
    # Похожие леммы (Левенштейн ≤ 2)
    ('сторона', 'страна'), ('страна', 'сторона'),  # Левенштейн лемм = 1
    ('внутрь', 'внутри'), ('внутри', 'внутрь'),  # наречия места
    ('присягнувших', 'посягнувших'), ('посягнувших', 'присягнувших'),
    ('устранить', 'устранять'), ('устранять', 'устранить'),  # вид глагола
    ('сменил', 'изменил'), ('изменил', 'сменил'),  # приставка
    ('формаций', 'информации'), ('информации', 'формаций'),
    ('дожны', 'должны'), ('должны', 'дожны'),  # опечатка Яндекса
    ('эрзумцев', 'арзунцев'), ('арзунцев', 'эрзумцев'),  # имя
    ('продавить', 'придавить'), ('придавить', 'продавить'),
    ('мыслеречь', 'музлеречь'), ('музлеречь', 'мыслеречь'),  # авторское слово
    ('схвате', 'схватке'), ('схватке', 'схвате'),  # Яндекс усечение
    # Усечение/расширение Яндекса (так→также)
    ('так', 'также'), ('также', 'так'),
    ('столб', 'стол'), ('стол', 'столб'),
    # Имена и специфика книги
    ('предводители', 'производители'), ('производители', 'предводители'),
    ('пересмешник', 'или'),  # имя персонажа
    ('брат', 'пратт'), ('пратт', 'брат'),  # имя
    ('глава', 'бла'),  # усечение титула
    # Прочие частые пары
    ('прилично', 'вечно'), ('вечно', 'прилично'),
    ('боли', 'болевых'), ('болевых', 'боли'),
    ('прочие', 'прочее'), ('прочее', 'прочие'),  # местоимения
    ('стирают', 'истирают'), ('истирают', 'стирают'),  # приставка и-
    # v5.7.2: Грамматические вариации (ложные срабатывания глава 4)
    # Деепричастие ↔ другие формы
    ('умирая', 'умирай'), ('умирай', 'умирая'),
    ('переделывая', 'переделываю'), ('переделываю', 'переделывая'),
    ('веря', 'верить'), ('верить', 'веря'),
    ('сказав', 'сказал'), ('сказал', 'сказав'),
    # Падежные вариации существительных
    ('идей', 'идеей'), ('идеей', 'идей'),  # род.мн ↔ тв.ед
    ('ладонь', 'ладони'), ('ладони', 'ладонь'),  # им.ед ↔ им.мн
    ('властелинов', 'властелина'), ('властелина', 'властелинов'),
    ('шей', 'шеей'), ('шеей', 'шей'),  # усечение/расширение
    ('стражи', 'стражу'), ('стражу', 'стражи'),
    ('поместий', 'поместья'), ('поместья', 'поместий'),
    ('возможностей', 'возможности'), ('возможности', 'возможностей'),
    ('пары', 'пара'), ('пара', 'пары'),
    ('затей', 'затеи'), ('затеи', 'затей'),
    ('силой', 'силы'), ('силы', 'силой'),
    ('указы', 'указа'), ('указа', 'указы'),
    ('старейшиной', 'старейшины'), ('старейшины', 'старейшиной'),
    # Числовые вариации глаголов
    ('знает', 'знают'), ('знают', 'знает'),
    ('проявятся', 'проявится'), ('проявится', 'проявятся'),
    # Числовые вариации прилагательных
    ('вытянутой', 'вытянутые'), ('вытянутые', 'вытянутой'),
    ('духовной', 'духовные'), ('духовные', 'духовной'),
    # Прочие грамматические вариации
    ('вопрос', 'вопросы'), ('вопросы', 'вопрос'),
    ('опустились', 'опустили'), ('опустили', 'опустились'),
    ('вернув', 'верну'), ('верну', 'вернув'),
    ('шлем', 'шлема'), ('шлема', 'шлем'),
    # v5.7.2: Усечения Яндекса (глава 4)
    ('непросто', 'не'), ('не', 'непросто'),
    ('неважно', 'не'), ('не', 'неважно'),
    ('властелина', 'власт'), ('власт', 'властелина'),
    ('тер', 'терпимо'), ('терпимо', 'тер'),
    # Артефакты выравнивания (слитые/разбитые слова)
    ('за', 'заплевываю'), ('заплевываю', 'за'),
    ('в', 'валом'), ('валом', 'в'),
    ('поместье', 'поместья'), ('поместья', 'поместье'),  # ед ↔ мн
    # v8.6.1: Новые пары из анализа БД (213 нефильтруемых FP)
    # Специфические названия книги
    ('мурлан', 'морлан'), ('морлан', 'мурлан'),  # имя/название
    ('рагидон', 'рагедон'), ('рагедон', 'рагидон'),  # имя/название
    ('лорденец', 'орденец'), ('орденец', 'лорденец'),  # ошибка Яндекса в слове
    # Фонетические замены
    ('клик', 'крик'), ('крик', 'клик'),  # л↔р
    ('лава', 'глава'), ('глава', 'лава'),  # л↔гл
    ('калека', 'калька'), ('калька', 'калека'),  # ошибка Яндекса
    # Короткие слова — артефакты
    # ВАЖНО: НЕ добавлять ('и', 'а') — это убивает Golden 'или→и' и 'а→и'!
    ('что', 'то'), ('то', 'что'),
    ('в', 'у'), ('у', 'в'),
    # УДАЛЕНО: ('эли', 'и') — это реальная ошибка чтеца (или→эли→и), Golden 30:38
    ('эль', 'и'), ('и', 'эль'),
    ('только', 'столько'), ('столько', 'только'),
    ('не', 'нет'), ('нет', 'не'),
    # Грамматические вариации (same_lemma, но разная форма)
    ('огон', 'огонь'), ('огонь', 'огон'),  # усечение
    ('идти', 'жетон'), ('жетон', 'идти'),  # артефакт распознавания
}


# =============================================================================
# ПРИСТАВКИ ЯНДЕКСА
# =============================================================================

YANDEX_PREFIX_ERRORS: Set[str] = {
    'не', 'на', 'по', 'от', 'у', 'вы', 'за', 'пере', 'про', 'при', 'раз', 'рас',
    'до', 'ви', 'ни',
}


# =============================================================================
# АРТЕФАКТЫ ВЫРАВНИВАНИЯ
# =============================================================================

ALIGNMENT_ARTIFACTS_DEL: Set[str] = {
    'в', 'о', 'у', 'к', 'с', 'но', 'ни', 'им', 'на', 'до',
    'х', 'не', 'так', 'те', 'вы', 'от', 'за', 'пятый',
    # УДАЛЕНО 'же' — "конечно же" это устойчивое выражение, пропуск "же" — реальная ошибка
    # v5.7.1: УДАЛЕНО 'да' и 'бы' — "да и не", "мог бы" — реальные ошибки чтеца (глава 4 golden)
    # v5.7.2: Артефакты выравнивания из главы 4
    'под', 'плевую', 'алом', 'их',
}

# Слабые слова, которые могут быть артефактами в середине предложения
SHORT_WEAK_WORDS: Set[str] = {'тот', 'так', 'эти', 'то', 'несколько', 'эдак'}

# Слабые слова, которые фильтруются в начале нового предложения (после ./?/!)
SENTENCE_START_WEAK_WORDS: Set[str] = {'тот', 'а', 'и', 'но', 'да'}

WEAK_CONJUNCTIONS: Set[str] = {'а', 'и'}

ALIGNMENT_ARTIFACTS_INS: Set[str] = {'в', 'о', 'у', 'к', 'с', 'не', 'на'}
# ВАЖНО: 'и' НЕ добавляем — удаление "и" может быть реальной ошибкой (глава 3 golden)

# ВАЖНО: 'и' и 'а' убраны — они могут быть реальными ошибками чтеца!
# Лучше показать лишние, чем пропустить реальные.
WEAK_INSERTIONS: Set[str] = set()  # Было {'и', 'а'}

FUNCTION_WORDS: Set[str] = {
    'то', 'что', 'ли', 'же', 'бы', 'ка', 'ни', 'не', 'и', 'а', 'я', 'о', 'у',
}


# =============================================================================
# ВСТАВКИ ЯНДЕКСА (РАЗБИТЫЕ СЛОВА)
# =============================================================================

YANDEX_SPLIT_INSERTIONS: Dict[str, str] = {
    'меня': 'у',
    'то': 'что',
    'под': 'из',
}

# Разбитые слова: вставка + предыдущее слово = оригинальное слово
# Формат: (prev_word, inserted_word): original_word
YANDEX_SPLIT_PAIRS: Dict[Tuple[str, str], str] = {
    ('вот', 'он'): 'жетон',
    ('это', 'говори'): 'выторговали',
}

# Вопросительные местоимения, после которых Яндекс может вставить «то»
INTERROGATIVE_PRONOUNS: Set[str] = {
    'кто', 'что', 'где', 'куда', 'откуда', 'когда', 'как', 'почему', 'зачем',
    'какой', 'какая', 'какое', 'какие', 'чей', 'чья', 'чьё', 'чьи',
}

# Редкие наречия/слова, которые Яндекс часто не распознаёт
RARE_ADVERBS: Set[str] = {'эдак', 'этак', 'инако', 'вишь', 'ишь'}

# =============================================================================
# ТРАНСПОЗИЦИИ (ПЕРЕСТАНОВКИ СЛОВ)
# =============================================================================

# v5.7: Частые транспозиции — ложные срабатывания из-за неточного выравнивания
# Формат: (слово1, слово2) — порядок не важен, обе перестановки фильтруются
SAFE_TRANSPOSITIONS: Set[Tuple[str, str]] = {
    ('ты', 'что'), ('что', 'ты'),  # "ты что" ↔ "что ты"
    ('ты', 'как'), ('как', 'ты'),  # "ты как" ↔ "как ты"
    ('он', 'что'), ('что', 'он'),
    ('же', 'ведь'), ('ведь', 'же'),
    ('то', 'это'), ('это', 'то'),
}
